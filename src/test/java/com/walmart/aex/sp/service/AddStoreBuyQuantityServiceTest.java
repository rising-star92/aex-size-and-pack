package com.walmart.aex.sp.service;

import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.walmart.aex.sp.dto.assortproduct.RFASizePackData;
import com.walmart.aex.sp.dto.bqfp.BQFPResponse;
import com.walmart.aex.sp.dto.buyquantity.AddStoreBuyQuantity;
import com.walmart.aex.sp.dto.buyquantity.BumpSetQuantity;
import com.walmart.aex.sp.dto.buyquantity.BuyQtyObj;
import com.walmart.aex.sp.dto.buyquantity.BuyQtyStoreObj;
import com.walmart.aex.sp.dto.buyquantity.CustomerChoiceDto;
import com.walmart.aex.sp.dto.buyquantity.SizeDto;
import com.walmart.aex.sp.dto.buyquantity.StoreQuantity;
import com.walmart.aex.sp.dto.buyquantity.StyleDto;
import com.walmart.aex.sp.dto.replenishment.MerchMethodsDto;
import com.walmart.aex.sp.properties.BuyQtyProperties;
import com.walmart.aex.sp.service.impl.DeptAdminRuleServiceImpl;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.mockito.*;
import org.mockito.junit.jupiter.MockitoExtension;

import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.ArrayList;
import java.util.List;

import static org.junit.jupiter.api.Assertions.assertEquals;

@ExtendWith(MockitoExtension.class)
class AddStoreBuyQuantityServiceTest {


    @Spy
    ObjectMapper objectMapper;

    @Spy
    CalculateBumpPackQtyService calculateBumpPackQtyService;

    @Spy
    CalculateInitialSetQuantityService calculateInitialSetQuantityService;

    @Mock
    BuyQuantityConstraintService buyQuantityConstraintService;

    @Mock
    DeptAdminRuleServiceImpl deptAdminRuleService;

    @InjectMocks
    private AddStoreBuyQuantityService addStoreBuyQuantityService;

    @Mock
    BuyQtyProperties buyQtyProperties;

    @BeforeEach
    void init() {
        MockitoAnnotations.openMocks(this);
        objectMapper = new ObjectMapper();
        calculateInitialSetQuantityService = new CalculateInitialSetQuantityService();
        calculateBumpPackQtyService = new CalculateBumpPackQtyService();
        buyQuantityConstraintService = new BuyQuantityConstraintService(calculateBumpPackQtyService);
        addStoreBuyQuantityService = new AddStoreBuyQuantityService(objectMapper, calculateBumpPackQtyService, buyQuantityConstraintService, calculateInitialSetQuantityService, buyQtyProperties);
        Mockito.when(buyQtyProperties.getOneUnitPerStoreFeatureFlag()).thenReturn("true");
    }

    @Test
    void addStoreBuyQuantitiesTest() throws IOException {
        String buyQtyJson = "{\"buyQtyStoreObj\":{\"buyQuantities\":[]},\"replenishments\":[{\"replnWeek\":12301,\"replnWeekDesc\":\"FYE2024WK01\",\"replnUnits\":null,\"adjReplnUnits\":5,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12305,\"replnWeekDesc\":\"FYE2024WK05\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12309,\"replnWeekDesc\":\"FYE2024WK09\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12313,\"replnWeekDesc\":\"FYE2024WK13\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null}],\"totalReplenishment\":23}";
        BuyQtyObj buyQtyObj = deserializeBuyQtyObj(buyQtyJson);
        final String path = "/plan72fineline4440";
        BQFPResponse bqfpResponse = bqfpResponseFromFile(path.concat("/BQFPResponseWithBumpSet"));
        AddStoreBuyQuantity addStoreBuyQuantity = getAddStoreBuyQuantities(bqfpResponse, getStyleDTO(), getMerchMethodsDto(), getSizeDTO(),getRFASizePackDataList(),getCustomerChoiceDTO());
        addStoreBuyQuantityService.addStoreBuyQuantities(addStoreBuyQuantity,buyQtyObj, 2);
        StoreQuantity storeQuantity = buyQtyObj.getBuyQtyStoreObj().getBuyQuantities().get(0);
        assertEquals(1050.0, storeQuantity.getTotalUnits());
        assertEquals(10.0, storeQuantity.getIsUnits());
    }

    @Test
    void addStoreBuyQuantitiesWithNullRFASizePackTest() throws IOException {
        String buyQtyJson = "{\"buyQtyStoreObj\":{\"buyQuantities\":[]},\"replenishments\":[{\"replnWeek\":12301,\"replnWeekDesc\":\"FYE2024WK01\",\"replnUnits\":null,\"adjReplnUnits\":5,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12305,\"replnWeekDesc\":\"FYE2024WK05\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12309,\"replnWeekDesc\":\"FYE2024WK09\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12313,\"replnWeekDesc\":\"FYE2024WK13\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null}],\"totalReplenishment\":23}";
        BuyQtyObj buyQtyObj = deserializeBuyQtyObj(buyQtyJson);
        final String path = "/plan72fineline4440";
        BQFPResponse bqfpResponse = bqfpResponseFromFile(path.concat("/BQFPResponseWithBumpSet"));
        List<RFASizePackData> rfaSizePackDataList = new ArrayList<>();
        rfaSizePackDataList.add(null);
        AddStoreBuyQuantity addStoreBuyQuantity = getAddStoreBuyQuantities(bqfpResponse, getStyleDTO(), getMerchMethodsDto(), getSizeDTO(), rfaSizePackDataList, getCustomerChoiceDTO());
        addStoreBuyQuantityService.addStoreBuyQuantities(addStoreBuyQuantity, buyQtyObj, 2);
        BuyQtyStoreObj buyQtyStoreObj = buyQtyObj.getBuyQtyStoreObj();
        assertEquals(0, buyQtyStoreObj.getBuyQuantities().size());
    }


    @Test
    void addStoreBuyQuantitiesWithReplnsConstraintTest() throws IOException {
        String buyQtyJson = "{\"buyQtyStoreObj\":{\"buyQuantities\":[]},\"replenishments\":[{\"replnWeek\":12301,\"replnWeekDesc\":\"FYE2024WK01\",\"replnUnits\":null,\"adjReplnUnits\":5,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12305,\"replnWeekDesc\":\"FYE2024WK05\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12309,\"replnWeekDesc\":\"FYE2024WK09\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12313,\"replnWeekDesc\":\"FYE2024WK13\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null}],\"totalReplenishment\":23}";
        BuyQtyObj buyQtyObj = deserializeBuyQtyObj(buyQtyJson);
        String rfaSizePackData = "{\"rpt_lvl_0_nbr\":50000,\"rpt_lvl_1_nbr\":34,\"rpt_lvl_2_nbr\":1488,\"rpt_lvl_3_nbr\":9074,\"rpt_lvl_4_nbr\":7207,\"fineline_nbr\":4440,\"style_nbr\":\"34_4440_3_24_001\",\"customer_choice\":\"34_4440_3_24_001_001\",\"fixture_type\":\"RACKS\",\"fixture_group\":1,\"color_family\":\"default\",\"size_cluster_id\":1,\"volume_group_cluster_id\":1,\"store_list\":\"[945,100]\",\"store_cnt\":2,\"plan_id_partition\":72}";
        List<RFASizePackData> rfaSizePackDataList = new ArrayList<>();
        rfaSizePackDataList.add(getRFASizePackData(rfaSizePackData));
        String bqfpJson = "{\"planId\":72,\"lvl0Nbr\":50000,\"lvl1Nbr\":34,\"lvl2Nbr\":1488,\"lvl3Nbr\":9074,\"lvl4Nbr\":7207,\"finelineNbr\":4440,\"volumeDeviationStrategyLevelSelection\":1,\"styles\":[{\"styleId\":\"34_4440_3_24_001\",\"styleName\":null,\"channelType\":null,\"metrics\":null,\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"flowStrategy\":null,\"customerChoices\":[{\"ccId\":\"34_4440_3_24_001_001\",\"ccName\":null,\"planId\":null,\"lvl0Nbr\":null,\"lvl1Nbr\":null,\"lvl2Nbr\":null,\"lvl3Nbr\":null,\"lvl4Nbr\":null,\"channelType\":null,\"finelineId\":null,\"styleId\":null,\"metrics\":null,\"fixtures\":[{\"fixtureType\":\"RACKS\",\"fixtureTypeRollupId\":3,\"metrics\":null,\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"clusters\":[{\"volClusterDesc\":null,\"volClusterLevel\":null,\"analyticsClusterId\":1,\"strategyId\":null,\"flowStrategy\":2,\"metrics\":{\"inStoredate\":null,\"markdownDate\":null,\"sellingWeeks\":null,\"minPresentationUnits\":null,\"maxPresentationUnits\":null,\"totalStoresAllocated\":null,\"storeProductivity\":null},\"initialSet\":{\"weeksOfSale\":null,\"initialSetUnitsPerFix\":5,\"totalInitialSetUnits\":1278},\"bumpList\":[{\"unitPct\":null,\"units\":3408,\"weekDesc\":null,\"weeksOfSale\":null,\"wmYearWeek\":null,\"bumpPackNbr\":1}],\"recon\":null}],\"flowStrategy\":null,\"replenishments\":[{\"replnWeek\":12244,\"replnWeekDesc\":\"FYE2023WK44\",\"replnUnits\":2027,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":12514,\"dcInboundAdjUnits\":0},{\"replnWeek\":12245,\"replnWeekDesc\":\"FYE2023WK45\",\"replnUnits\":2274,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12246,\"replnWeekDesc\":\"FYE2023WK46\",\"replnUnits\":2466,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12247,\"replnWeekDesc\":\"FYE2023WK47\",\"replnUnits\":3095,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12248,\"replnWeekDesc\":\"FYE2023WK48\",\"replnUnits\":2652,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":6627,\"dcInboundAdjUnits\":0},{\"replnWeek\":12249,\"replnWeekDesc\":\"FYE2023WK49\",\"replnUnits\":2600,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12250,\"replnWeekDesc\":\"FYE2023WK50\",\"replnUnits\":2469,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12251,\"replnWeekDesc\":\"FYE2023WK51\",\"replnUnits\":1558,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12252,\"replnWeekDesc\":\"FYE2023WK52\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12301,\"replnWeekDesc\":\"FYE2024WK01\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12302,\"replnWeekDesc\":\"FYE2024WK02\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12303,\"replnWeekDesc\":\"FYE2024WK03\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12304,\"replnWeekDesc\":\"FYE2024WK04\",\"replnUnits\":null,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0}],\"remainingUnits\":1996}],\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"flowStrategy\":null,\"replenishments\":[]}],\"replenishment\":null}]}";
        BQFPResponse bqfpResponse = bqfpResponseFromJson(bqfpJson);
        AddStoreBuyQuantity addStoreBuyQuantity = getAddStoreBuyQuantities(bqfpResponse, getStyleDTO(), getMerchMethodsDto(), getSizeDTO(), rfaSizePackDataList, getCustomerChoiceDTO());
        addStoreBuyQuantityService.addStoreBuyQuantities(addStoreBuyQuantity,buyQtyObj, 2);
        StoreQuantity storeQuantity = buyQtyObj.getBuyQtyStoreObj().getBuyQuantities().get(0);
        assertEquals(4.0, storeQuantity.getTotalUnits());
        assertEquals(2.0, storeQuantity.getIsUnits());
    }

    @Test
    void addStoreBuyQuantitiesWithlessReplnsConstraintTest() throws IOException {
        String buyQtyJson = "{\"buyQtyStoreObj\":{\"buyQuantities\":[]},\"replenishments\":[{\"replnWeek\":12301,\"replnWeekDesc\":\"FYE2024WK01\",\"replnUnits\":null,\"adjReplnUnits\":1,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null}],\"totalReplenishment\":1}";
        BuyQtyObj buyQtyObj = deserializeBuyQtyObj(buyQtyJson);
        String rfaSizePackData = "{\"rpt_lvl_0_nbr\":50000,\"rpt_lvl_1_nbr\":34,\"rpt_lvl_2_nbr\":1488,\"rpt_lvl_3_nbr\":9074,\"rpt_lvl_4_nbr\":7207,\"fineline_nbr\":4440,\"style_nbr\":\"34_4440_3_24_001\",\"customer_choice\":\"34_4440_3_24_001_001\",\"fixture_type\":\"RACKS\",\"fixture_group\":1,\"color_family\":\"default\",\"size_cluster_id\":1,\"volume_group_cluster_id\":1,\"store_list\":\"[945,100]\",\"store_cnt\":2,\"plan_id_partition\":72}";
        List<RFASizePackData> rfaSizePackDataList = new ArrayList<>();
        rfaSizePackDataList.add(getRFASizePackData(rfaSizePackData));
        String bqfpJson = "{\"planId\":72,\"lvl0Nbr\":50000,\"lvl1Nbr\":34,\"lvl2Nbr\":1488,\"lvl3Nbr\":9074,\"lvl4Nbr\":7207,\"finelineNbr\":4440,\"volumeDeviationStrategyLevelSelection\":1,\"styles\":[{\"styleId\":\"34_4440_3_24_001\",\"styleName\":null,\"channelType\":null,\"metrics\":null,\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"flowStrategy\":null,\"customerChoices\":[{\"ccId\":\"34_4440_3_24_001_001\",\"ccName\":null,\"planId\":null,\"lvl0Nbr\":null,\"lvl1Nbr\":null,\"lvl2Nbr\":null,\"lvl3Nbr\":null,\"lvl4Nbr\":null,\"channelType\":null,\"finelineId\":null,\"styleId\":null,\"metrics\":null,\"fixtures\":[{\"fixtureType\":\"RACKS\",\"fixtureTypeRollupId\":3,\"metrics\":null,\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"clusters\":[{\"volClusterDesc\":null,\"volClusterLevel\":null,\"analyticsClusterId\":1,\"strategyId\":null,\"flowStrategy\":2,\"metrics\":{\"inStoredate\":null,\"markdownDate\":null,\"sellingWeeks\":null,\"minPresentationUnits\":null,\"maxPresentationUnits\":null,\"totalStoresAllocated\":null,\"storeProductivity\":null},\"initialSet\":{\"weeksOfSale\":null,\"initialSetUnitsPerFix\":5,\"totalInitialSetUnits\":1278},\"bumpList\":[{\"unitPct\":null,\"units\":3408,\"weekDesc\":null,\"weeksOfSale\":null,\"wmYearWeek\":null,\"bumpPackNbr\":1}],\"recon\":null}],\"flowStrategy\":null,\"replenishments\":[{\"replnWeek\":12244,\"replnWeekDesc\":\"FYE2023WK44\",\"replnUnits\":2027,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":12514,\"dcInboundAdjUnits\":0},{\"replnWeek\":12245,\"replnWeekDesc\":\"FYE2023WK45\",\"replnUnits\":2274,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12246,\"replnWeekDesc\":\"FYE2023WK46\",\"replnUnits\":2466,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12247,\"replnWeekDesc\":\"FYE2023WK47\",\"replnUnits\":3095,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12248,\"replnWeekDesc\":\"FYE2023WK48\",\"replnUnits\":2652,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":6627,\"dcInboundAdjUnits\":0},{\"replnWeek\":12249,\"replnWeekDesc\":\"FYE2023WK49\",\"replnUnits\":2600,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12250,\"replnWeekDesc\":\"FYE2023WK50\",\"replnUnits\":2469,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12251,\"replnWeekDesc\":\"FYE2023WK51\",\"replnUnits\":1558,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12252,\"replnWeekDesc\":\"FYE2023WK52\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12301,\"replnWeekDesc\":\"FYE2024WK01\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12302,\"replnWeekDesc\":\"FYE2024WK02\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12303,\"replnWeekDesc\":\"FYE2024WK03\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12304,\"replnWeekDesc\":\"FYE2024WK04\",\"replnUnits\":null,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0}],\"remainingUnits\":1996}],\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"flowStrategy\":null,\"replenishments\":[]}],\"replenishment\":null}]}";
        BQFPResponse bqfpResponse = bqfpResponseFromJson(bqfpJson);
        AddStoreBuyQuantity addStoreBuyQuantity = getAddStoreBuyQuantities(bqfpResponse, getStyleDTO(), getMerchMethodsDto(), getSizeDTO(), rfaSizePackDataList, getCustomerChoiceDTO());
        addStoreBuyQuantityService.addStoreBuyQuantities(addStoreBuyQuantity,buyQtyObj, 2);
        StoreQuantity storeQuantity = buyQtyObj.getBuyQtyStoreObj().getBuyQuantities().get(1);
        assertEquals(1.0, storeQuantity.getTotalUnits());
        assertEquals(1.0, storeQuantity.getIsUnits());
    }

    @Test
    void addStoreBuyQuantitiesWithNullInitialSet() throws IOException {
        String buyQtyJson = "{\"buyQtyStoreObj\":{\"buyQuantities\":[]},\"replenishments\":[{\"replnWeek\":12301,\"replnWeekDesc\":\"FYE2024WK01\",\"replnUnits\":null,\"adjReplnUnits\":5,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12305,\"replnWeekDesc\":\"FYE2024WK05\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12309,\"replnWeekDesc\":\"FYE2024WK09\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12313,\"replnWeekDesc\":\"FYE2024WK13\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null}],\"totalReplenishment\":23}";
        BuyQtyObj buyQtyObj = deserializeBuyQtyObj(buyQtyJson);
        String rfaSizePackData = "{\"rpt_lvl_0_nbr\":50000,\"rpt_lvl_1_nbr\":34,\"rpt_lvl_2_nbr\":1488,\"rpt_lvl_3_nbr\":9074,\"rpt_lvl_4_nbr\":7207,\"fineline_nbr\":4440,\"style_nbr\":\"34_4440_3_24_001\",\"customer_choice\":\"34_4440_3_24_001_001\",\"fixture_type\":\"RACKS\",\"fixture_group\":1,\"color_family\":\"default\",\"size_cluster_id\":1,\"volume_group_cluster_id\":1,\"store_list\":\"[945,100]\",\"store_cnt\":2,\"plan_id_partition\":72}";
        List<RFASizePackData> rfaSizePackDataList = new ArrayList<>();
        rfaSizePackDataList.add(getRFASizePackData(rfaSizePackData));
        String bqfpJson = "{\"planId\":72,\"lvl0Nbr\":50000,\"lvl1Nbr\":34,\"lvl2Nbr\":1488,\"lvl3Nbr\":9074,\"lvl4Nbr\":7207,\"finelineNbr\":4440,\"volumeDeviationStrategyLevelSelection\":1,\"styles\":[{\"styleId\":\"34_4440_3_24_001\",\"styleName\":null,\"channelType\":null,\"metrics\":null,\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"flowStrategy\":null,\"customerChoices\":[{\"ccId\":\"34_4440_3_24_001_001\",\"ccName\":null,\"planId\":null,\"lvl0Nbr\":null,\"lvl1Nbr\":null,\"lvl2Nbr\":null,\"lvl3Nbr\":null,\"lvl4Nbr\":null,\"channelType\":null,\"finelineId\":null,\"styleId\":null,\"metrics\":null,\"fixtures\":[{\"fixtureType\":\"RACKS\",\"fixtureTypeRollupId\":3,\"metrics\":null,\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"clusters\":[{\"volClusterDesc\":null,\"volClusterLevel\":null,\"analyticsClusterId\":1,\"strategyId\":null,\"flowStrategy\":2,\"metrics\":{\"inStoredate\":null,\"markdownDate\":null,\"sellingWeeks\":null,\"minPresentationUnits\":null,\"maxPresentationUnits\":null,\"totalStoresAllocated\":null,\"storeProductivity\":null},\"initialSet\":null,\"bumpList\":[{\"unitPct\":null,\"units\":3408,\"weekDesc\":null,\"weeksOfSale\":null,\"wmYearWeek\":null,\"bumpPackNbr\":1}],\"recon\":null}],\"flowStrategy\":null,\"replenishments\":[{\"replnWeek\":12244,\"replnWeekDesc\":\"FYE2023WK44\",\"replnUnits\":2027,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":12514,\"dcInboundAdjUnits\":0},{\"replnWeek\":12245,\"replnWeekDesc\":\"FYE2023WK45\",\"replnUnits\":2274,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12246,\"replnWeekDesc\":\"FYE2023WK46\",\"replnUnits\":2466,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12247,\"replnWeekDesc\":\"FYE2023WK47\",\"replnUnits\":3095,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12248,\"replnWeekDesc\":\"FYE2023WK48\",\"replnUnits\":2652,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":6627,\"dcInboundAdjUnits\":0},{\"replnWeek\":12249,\"replnWeekDesc\":\"FYE2023WK49\",\"replnUnits\":2600,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12250,\"replnWeekDesc\":\"FYE2023WK50\",\"replnUnits\":2469,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12251,\"replnWeekDesc\":\"FYE2023WK51\",\"replnUnits\":1558,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12252,\"replnWeekDesc\":\"FYE2023WK52\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12301,\"replnWeekDesc\":\"FYE2024WK01\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12302,\"replnWeekDesc\":\"FYE2024WK02\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12303,\"replnWeekDesc\":\"FYE2024WK03\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12304,\"replnWeekDesc\":\"FYE2024WK04\",\"replnUnits\":null,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0}],\"remainingUnits\":1996}],\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"flowStrategy\":null,\"replenishments\":[]}],\"replenishment\":null}]}";
        BQFPResponse bqfpResponse = bqfpResponseFromJson(bqfpJson);
        AddStoreBuyQuantity addStoreBuyQuantity = getAddStoreBuyQuantities(bqfpResponse, getStyleDTO(), getMerchMethodsDto(), getSizeDTO(), rfaSizePackDataList, getCustomerChoiceDTO());
        addStoreBuyQuantityService.addStoreBuyQuantities(addStoreBuyQuantity,buyQtyObj, 2);
        StoreQuantity storeQuantity = buyQtyObj.getBuyQtyStoreObj().getBuyQuantities().get(0);
        assertEquals(4.0, storeQuantity.getTotalUnits());
        assertEquals(2.0, storeQuantity.getIsUnits());
    }

    @Test
    void addStoreBuyQuantitiesWithNullInitialSetWithV1() throws IOException {
        Mockito.when(buyQtyProperties.getOneUnitPerStoreFeatureFlag()).thenReturn("false");
        String buyQtyJson = "{\"buyQtyStoreObj\":{\"buyQuantities\":[]},\"replenishments\":[{\"replnWeek\":12301,\"replnWeekDesc\":\"FYE2024WK01\",\"replnUnits\":null,\"adjReplnUnits\":5,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12305,\"replnWeekDesc\":\"FYE2024WK05\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12309,\"replnWeekDesc\":\"FYE2024WK09\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12313,\"replnWeekDesc\":\"FYE2024WK13\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null}],\"totalReplenishment\":23}";
        BuyQtyObj buyQtyObj = deserializeBuyQtyObj(buyQtyJson);
        String rfaSizePackData = "{\"rpt_lvl_0_nbr\":50000,\"rpt_lvl_1_nbr\":34,\"rpt_lvl_2_nbr\":1488,\"rpt_lvl_3_nbr\":9074,\"rpt_lvl_4_nbr\":7207,\"fineline_nbr\":4440,\"style_nbr\":\"34_4440_3_24_001\",\"customer_choice\":\"34_4440_3_24_001_001\",\"fixture_type\":\"RACKS\",\"fixture_group\":1,\"color_family\":\"default\",\"size_cluster_id\":1,\"volume_group_cluster_id\":1,\"store_list\":\"[945,100]\",\"store_cnt\":2,\"plan_id_partition\":72}";
        List<RFASizePackData> rfaSizePackDataList = new ArrayList<>();
        rfaSizePackDataList.add(getRFASizePackData(rfaSizePackData));
        String bqfpJson = "{\"planId\":72,\"lvl0Nbr\":50000,\"lvl1Nbr\":34,\"lvl2Nbr\":1488,\"lvl3Nbr\":9074,\"lvl4Nbr\":7207,\"finelineNbr\":4440,\"volumeDeviationStrategyLevelSelection\":1,\"styles\":[{\"styleId\":\"34_4440_3_24_001\",\"styleName\":null,\"channelType\":null,\"metrics\":null,\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"flowStrategy\":null,\"customerChoices\":[{\"ccId\":\"34_4440_3_24_001_001\",\"ccName\":null,\"planId\":null,\"lvl0Nbr\":null,\"lvl1Nbr\":null,\"lvl2Nbr\":null,\"lvl3Nbr\":null,\"lvl4Nbr\":null,\"channelType\":null,\"finelineId\":null,\"styleId\":null,\"metrics\":null,\"fixtures\":[{\"fixtureType\":\"RACKS\",\"fixtureTypeRollupId\":3,\"metrics\":null,\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"clusters\":[{\"volClusterDesc\":null,\"volClusterLevel\":null,\"analyticsClusterId\":1,\"strategyId\":null,\"flowStrategy\":2,\"metrics\":{\"inStoredate\":null,\"markdownDate\":null,\"sellingWeeks\":null,\"minPresentationUnits\":null,\"maxPresentationUnits\":null,\"totalStoresAllocated\":null,\"storeProductivity\":null},\"initialSet\":null,\"bumpList\":[{\"unitPct\":null,\"units\":3408,\"weekDesc\":null,\"weeksOfSale\":null,\"wmYearWeek\":null,\"bumpPackNbr\":1}],\"recon\":null}],\"flowStrategy\":null,\"replenishments\":[{\"replnWeek\":12244,\"replnWeekDesc\":\"FYE2023WK44\",\"replnUnits\":2027,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":12514,\"dcInboundAdjUnits\":0},{\"replnWeek\":12245,\"replnWeekDesc\":\"FYE2023WK45\",\"replnUnits\":2274,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12246,\"replnWeekDesc\":\"FYE2023WK46\",\"replnUnits\":2466,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12247,\"replnWeekDesc\":\"FYE2023WK47\",\"replnUnits\":3095,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12248,\"replnWeekDesc\":\"FYE2023WK48\",\"replnUnits\":2652,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":6627,\"dcInboundAdjUnits\":0},{\"replnWeek\":12249,\"replnWeekDesc\":\"FYE2023WK49\",\"replnUnits\":2600,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12250,\"replnWeekDesc\":\"FYE2023WK50\",\"replnUnits\":2469,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12251,\"replnWeekDesc\":\"FYE2023WK51\",\"replnUnits\":1558,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12252,\"replnWeekDesc\":\"FYE2023WK52\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12301,\"replnWeekDesc\":\"FYE2024WK01\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12302,\"replnWeekDesc\":\"FYE2024WK02\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12303,\"replnWeekDesc\":\"FYE2024WK03\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12304,\"replnWeekDesc\":\"FYE2024WK04\",\"replnUnits\":null,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0}],\"remainingUnits\":1996}],\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"flowStrategy\":null,\"replenishments\":[]}],\"replenishment\":null}]}";
        BQFPResponse bqfpResponse = bqfpResponseFromJson(bqfpJson);
        AddStoreBuyQuantity addStoreBuyQuantity = getAddStoreBuyQuantities(bqfpResponse, getStyleDTO(), getMerchMethodsDto(), getSizeDTO(), rfaSizePackDataList, getCustomerChoiceDTO());
        addStoreBuyQuantityService.addStoreBuyQuantities(addStoreBuyQuantity,buyQtyObj, 2);
        StoreQuantity storeQuantity = buyQtyObj.getBuyQtyStoreObj().getBuyQuantities().get(0);
        assertEquals(0.0, storeQuantity.getTotalUnits());
        assertEquals(0.0, storeQuantity.getIsUnits());
    }

    @Test
    void addStoreBuyQuantitiesWithNullInitialSetUnitsPerFix() throws IOException {
        String buyQtyJson = "{\"buyQtyStoreObj\":{\"buyQuantities\":[]},\"replenishments\":[{\"replnWeek\":12301,\"replnWeekDesc\":\"FYE2024WK01\",\"replnUnits\":null,\"adjReplnUnits\":5,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12305,\"replnWeekDesc\":\"FYE2024WK05\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12309,\"replnWeekDesc\":\"FYE2024WK09\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12313,\"replnWeekDesc\":\"FYE2024WK13\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null}],\"totalReplenishment\":23}";
        BuyQtyObj buyQtyObj = deserializeBuyQtyObj(buyQtyJson);
        String rfaSizePackData = "{\"rpt_lvl_0_nbr\":50000,\"rpt_lvl_1_nbr\":34,\"rpt_lvl_2_nbr\":1488,\"rpt_lvl_3_nbr\":9074,\"rpt_lvl_4_nbr\":7207,\"fineline_nbr\":4440,\"style_nbr\":\"34_4440_3_24_001\",\"customer_choice\":\"34_4440_3_24_001_001\",\"fixture_type\":\"RACKS\",\"fixture_group\":1,\"color_family\":\"default\",\"size_cluster_id\":1,\"volume_group_cluster_id\":1,\"store_list\":\"[945,100]\",\"store_cnt\":2,\"plan_id_partition\":72}";
        List<RFASizePackData> rfaSizePackDataList = new ArrayList<>();
        rfaSizePackDataList.add(getRFASizePackData(rfaSizePackData));
        String bqfpJson = "{\"planId\":72,\"lvl0Nbr\":50000,\"lvl1Nbr\":34,\"lvl2Nbr\":1488,\"lvl3Nbr\":9074,\"lvl4Nbr\":7207,\"finelineNbr\":4440,\"volumeDeviationStrategyLevelSelection\":1,\"styles\":[{\"styleId\":\"34_4440_3_24_001\",\"styleName\":null,\"channelType\":null,\"metrics\":null,\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"flowStrategy\":null,\"customerChoices\":[{\"ccId\":\"34_4440_3_24_001_001\",\"ccName\":null,\"planId\":null,\"lvl0Nbr\":null,\"lvl1Nbr\":null,\"lvl2Nbr\":null,\"lvl3Nbr\":null,\"lvl4Nbr\":null,\"channelType\":null,\"finelineId\":null,\"styleId\":null,\"metrics\":null,\"fixtures\":[{\"fixtureType\":\"RACKS\",\"fixtureTypeRollupId\":3,\"metrics\":null,\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"clusters\":[{\"volClusterDesc\":null,\"volClusterLevel\":null,\"analyticsClusterId\":1,\"strategyId\":null,\"flowStrategy\":2,\"metrics\":{\"inStoredate\":null,\"markdownDate\":null,\"sellingWeeks\":null,\"minPresentationUnits\":null,\"maxPresentationUnits\":null,\"totalStoresAllocated\":null,\"storeProductivity\":null},\"initialSet\":{\"weeksOfSale\":null,\"initialSetUnitsPerFix\":null,\"totalInitialSetUnits\":1278},\"bumpList\":[{\"unitPct\":null,\"units\":3408,\"weekDesc\":null,\"weeksOfSale\":null,\"wmYearWeek\":null,\"bumpPackNbr\":1}],\"recon\":null}],\"flowStrategy\":null,\"replenishments\":[{\"replnWeek\":12244,\"replnWeekDesc\":\"FYE2023WK44\",\"replnUnits\":2027,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":12514,\"dcInboundAdjUnits\":0},{\"replnWeek\":12245,\"replnWeekDesc\":\"FYE2023WK45\",\"replnUnits\":2274,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12246,\"replnWeekDesc\":\"FYE2023WK46\",\"replnUnits\":2466,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12247,\"replnWeekDesc\":\"FYE2023WK47\",\"replnUnits\":3095,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12248,\"replnWeekDesc\":\"FYE2023WK48\",\"replnUnits\":2652,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":6627,\"dcInboundAdjUnits\":0},{\"replnWeek\":12249,\"replnWeekDesc\":\"FYE2023WK49\",\"replnUnits\":2600,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12250,\"replnWeekDesc\":\"FYE2023WK50\",\"replnUnits\":2469,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12251,\"replnWeekDesc\":\"FYE2023WK51\",\"replnUnits\":1558,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12252,\"replnWeekDesc\":\"FYE2023WK52\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12301,\"replnWeekDesc\":\"FYE2024WK01\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12302,\"replnWeekDesc\":\"FYE2024WK02\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12303,\"replnWeekDesc\":\"FYE2024WK03\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12304,\"replnWeekDesc\":\"FYE2024WK04\",\"replnUnits\":null,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0}],\"remainingUnits\":1996}],\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"flowStrategy\":null,\"replenishments\":[]}],\"replenishment\":null}]}";
        BQFPResponse bqfpResponse = bqfpResponseFromJson(bqfpJson);
        AddStoreBuyQuantity addStoreBuyQuantity = getAddStoreBuyQuantities(bqfpResponse, getStyleDTO(), getMerchMethodsDto(), getSizeDTO(), rfaSizePackDataList, getCustomerChoiceDTO());
        addStoreBuyQuantityService.addStoreBuyQuantities(addStoreBuyQuantity,buyQtyObj, 2);
        StoreQuantity storeQuantity = buyQtyObj.getBuyQtyStoreObj().getBuyQuantities().get(0);
        assertEquals(4.0, storeQuantity.getTotalUnits());
        assertEquals(2.0, storeQuantity.getIsUnits());
    }

    @Test
    void addStoreBuyQuantitiesWithNullTotalInitialSetUnits() throws IOException {
        String buyQtyJson = "{\"buyQtyStoreObj\":{\"buyQuantities\":[]},\"replenishments\":[{\"replnWeek\":12301,\"replnWeekDesc\":\"FYE2024WK01\",\"replnUnits\":null,\"adjReplnUnits\":5,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12305,\"replnWeekDesc\":\"FYE2024WK05\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12309,\"replnWeekDesc\":\"FYE2024WK09\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null},{\"replnWeek\":12313,\"replnWeekDesc\":\"FYE2024WK13\",\"replnUnits\":null,\"adjReplnUnits\":6,\"remainingUnits\":null,\"dcInboundUnits\":null,\"dcInboundAdjUnits\":null}],\"totalReplenishment\":23}";
        BuyQtyObj buyQtyObj = deserializeBuyQtyObj(buyQtyJson);
        String rfaSizePackData = "{\"rpt_lvl_0_nbr\":50000,\"rpt_lvl_1_nbr\":34,\"rpt_lvl_2_nbr\":1488,\"rpt_lvl_3_nbr\":9074,\"rpt_lvl_4_nbr\":7207,\"fineline_nbr\":4440,\"style_nbr\":\"34_4440_3_24_001\",\"customer_choice\":\"34_4440_3_24_001_001\",\"fixture_type\":\"RACKS\",\"fixture_group\":1,\"color_family\":\"default\",\"size_cluster_id\":1,\"volume_group_cluster_id\":1,\"store_list\":\"[945,100]\",\"store_cnt\":2,\"plan_id_partition\":72}";
        List<RFASizePackData> rfaSizePackDataList = new ArrayList<>();
        rfaSizePackDataList.add(getRFASizePackData(rfaSizePackData));
        String bqfpJson = "{\"planId\":72,\"lvl0Nbr\":50000,\"lvl1Nbr\":34,\"lvl2Nbr\":1488,\"lvl3Nbr\":9074,\"lvl4Nbr\":7207,\"finelineNbr\":4440,\"volumeDeviationStrategyLevelSelection\":1,\"styles\":[{\"styleId\":\"34_4440_3_24_001\",\"styleName\":null,\"channelType\":null,\"metrics\":null,\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"flowStrategy\":null,\"customerChoices\":[{\"ccId\":\"34_4440_3_24_001_001\",\"ccName\":null,\"planId\":null,\"lvl0Nbr\":null,\"lvl1Nbr\":null,\"lvl2Nbr\":null,\"lvl3Nbr\":null,\"lvl4Nbr\":null,\"channelType\":null,\"finelineId\":null,\"styleId\":null,\"metrics\":null,\"fixtures\":[{\"fixtureType\":\"RACKS\",\"fixtureTypeRollupId\":3,\"metrics\":null,\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"clusters\":[{\"volClusterDesc\":null,\"volClusterLevel\":null,\"analyticsClusterId\":1,\"strategyId\":null,\"flowStrategy\":2,\"metrics\":{\"inStoredate\":null,\"markdownDate\":null,\"sellingWeeks\":null,\"minPresentationUnits\":null,\"maxPresentationUnits\":null,\"totalStoresAllocated\":null,\"storeProductivity\":null},\"initialSet\":{\"weeksOfSale\":null,\"initialSetUnitsPerFix\":10,\"totalInitialSetUnits\":null},\"bumpList\":[{\"unitPct\":null,\"units\":3408,\"weekDesc\":null,\"weeksOfSale\":null,\"wmYearWeek\":null,\"bumpPackNbr\":1}],\"recon\":null}],\"flowStrategy\":null,\"replenishments\":[{\"replnWeek\":12244,\"replnWeekDesc\":\"FYE2023WK44\",\"replnUnits\":2027,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":12514,\"dcInboundAdjUnits\":0},{\"replnWeek\":12245,\"replnWeekDesc\":\"FYE2023WK45\",\"replnUnits\":2274,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12246,\"replnWeekDesc\":\"FYE2023WK46\",\"replnUnits\":2466,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12247,\"replnWeekDesc\":\"FYE2023WK47\",\"replnUnits\":3095,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12248,\"replnWeekDesc\":\"FYE2023WK48\",\"replnUnits\":2652,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":6627,\"dcInboundAdjUnits\":0},{\"replnWeek\":12249,\"replnWeekDesc\":\"FYE2023WK49\",\"replnUnits\":2600,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12250,\"replnWeekDesc\":\"FYE2023WK50\",\"replnUnits\":2469,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12251,\"replnWeekDesc\":\"FYE2023WK51\",\"replnUnits\":1558,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12252,\"replnWeekDesc\":\"FYE2023WK52\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12301,\"replnWeekDesc\":\"FYE2024WK01\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12302,\"replnWeekDesc\":\"FYE2024WK02\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12303,\"replnWeekDesc\":\"FYE2024WK03\",\"replnUnits\":0,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0},{\"replnWeek\":12304,\"replnWeekDesc\":\"FYE2024WK04\",\"replnUnits\":null,\"adjReplnUnits\":null,\"remainingUnits\":1996,\"dcInboundUnits\":0,\"dcInboundAdjUnits\":0}],\"remainingUnits\":1996}],\"initialSet\":null,\"bumpList\":null,\"recon\":null,\"flowStrategy\":null,\"replenishments\":[]}],\"replenishment\":null}]}";
        BQFPResponse bqfpResponse = bqfpResponseFromJson(bqfpJson);
        AddStoreBuyQuantity addStoreBuyQuantity = getAddStoreBuyQuantities(bqfpResponse, getStyleDTO(), getMerchMethodsDto(), getSizeDTO(), rfaSizePackDataList, getCustomerChoiceDTO());
        addStoreBuyQuantityService.addStoreBuyQuantities(addStoreBuyQuantity,buyQtyObj, 2);
        StoreQuantity storeQuantity = buyQtyObj.getBuyQtyStoreObj().getBuyQuantities().get(0);
        assertEquals(6.0, storeQuantity.getTotalUnits());
        assertEquals(3.0, storeQuantity.getIsUnits());
        BumpSetQuantity bumpSetQuantity = storeQuantity.getBumpSets().get(0);
        assertEquals(9062.0, bumpSetQuantity.getBsUnits());
        assertEquals(18124.0, bumpSetQuantity.getTotalUnits());
    }

    private AddStoreBuyQuantity getAddStoreBuyQuantities(BQFPResponse bqfpResponse, StyleDto styleDto, MerchMethodsDto merchMethodsDto, SizeDto sizeDto, List<RFASizePackData> rfaSizePackDataList, CustomerChoiceDto customerChoiceDto) throws IOException {
        AddStoreBuyQuantity addStoreBuyQuantity = new AddStoreBuyQuantity();
        addStoreBuyQuantity.setBqfpResponse(bqfpResponse);
        addStoreBuyQuantity.setStyleDto(styleDto);
        addStoreBuyQuantity.setMerchMethodsDto(merchMethodsDto);
        addStoreBuyQuantity.setSizeDto(sizeDto);
        addStoreBuyQuantity.setRfaSizePackDataList(rfaSizePackDataList);
        addStoreBuyQuantity.setCustomerChoiceDto(customerChoiceDto);
        return addStoreBuyQuantity;
    }

    private CustomerChoiceDto getCustomerChoiceDTO(){
        String json = "{\"ccId\":\"34_4440_3_24_001_001\",\"colorName\":null,\"metrics\":{\"sizeProfilePct\":null,\"adjSizeProfilePct\":null,\"avgSizeProfilePct\":97.758,\"adjAvgSizeProfilePct\":97.758,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"clusters\":[{\"clusterID\":0,\"sizes\":[{\"ahsSizeId\":3165,\"sizeId\":null,\"sizeDesc\":\"L\",\"metrics\":{\"sizeProfilePct\":0,\"adjSizeProfilePct\":0,\"avgSizeProfilePct\":26.236,\"adjAvgSizeProfilePct\":26.236,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3222,\"sizeId\":null,\"sizeDesc\":\"M\",\"metrics\":{\"sizeProfilePct\":0,\"adjSizeProfilePct\":0,\"avgSizeProfilePct\":24.892,\"adjAvgSizeProfilePct\":24.892,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3241,\"sizeId\":null,\"sizeDesc\":\"S\",\"metrics\":{\"sizeProfilePct\":0,\"adjSizeProfilePct\":0,\"avgSizeProfilePct\":14.244,\"adjAvgSizeProfilePct\":14.244,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3279,\"sizeId\":null,\"sizeDesc\":\"XL\",\"metrics\":{\"sizeProfilePct\":0,\"adjSizeProfilePct\":0,\"avgSizeProfilePct\":17.416,\"adjAvgSizeProfilePct\":17.416,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3317,\"sizeId\":null,\"sizeDesc\":\"XS\",\"metrics\":{\"sizeProfilePct\":0,\"adjSizeProfilePct\":0,\"avgSizeProfilePct\":5.088,\"adjAvgSizeProfilePct\":5.088,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3336,\"sizeId\":null,\"sizeDesc\":\"XXL\",\"metrics\":{\"sizeProfilePct\":0,\"adjSizeProfilePct\":0,\"avgSizeProfilePct\":9.882,\"adjAvgSizeProfilePct\":9.882,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null}]},{\"clusterID\":1,\"sizes\":[{\"ahsSizeId\":3165,\"sizeId\":null,\"sizeDesc\":\"L\",\"metrics\":{\"sizeProfilePct\":26.59,\"adjSizeProfilePct\":26.59,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3222,\"sizeId\":null,\"sizeDesc\":\"M\",\"metrics\":{\"sizeProfilePct\":25.81,\"adjSizeProfilePct\":25.81,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3241,\"sizeId\":null,\"sizeDesc\":\"S\",\"metrics\":{\"sizeProfilePct\":14.22,\"adjSizeProfilePct\":14.22,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3279,\"sizeId\":null,\"sizeDesc\":\"XL\",\"metrics\":{\"sizeProfilePct\":17.22,\"adjSizeProfilePct\":17.22,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3317,\"sizeId\":null,\"sizeDesc\":\"XS\",\"metrics\":{\"sizeProfilePct\":4.87,\"adjSizeProfilePct\":4.87,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3336,\"sizeId\":null,\"sizeDesc\":\"XXL\",\"metrics\":{\"sizeProfilePct\":9.37,\"adjSizeProfilePct\":9.37,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null}]},{\"clusterID\":2,\"sizes\":[{\"ahsSizeId\":3165,\"sizeId\":null,\"sizeDesc\":\"L\",\"metrics\":{\"sizeProfilePct\":26.26,\"adjSizeProfilePct\":26.26,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3222,\"sizeId\":null,\"sizeDesc\":\"M\",\"metrics\":{\"sizeProfilePct\":24.82,\"adjSizeProfilePct\":24.82,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3241,\"sizeId\":null,\"sizeDesc\":\"S\",\"metrics\":{\"sizeProfilePct\":14.81,\"adjSizeProfilePct\":14.81,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3279,\"sizeId\":null,\"sizeDesc\":\"XL\",\"metrics\":{\"sizeProfilePct\":16.87,\"adjSizeProfilePct\":16.87,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3317,\"sizeId\":null,\"sizeDesc\":\"XS\",\"metrics\":{\"sizeProfilePct\":5.81,\"adjSizeProfilePct\":5.81,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3336,\"sizeId\":null,\"sizeDesc\":\"XXL\",\"metrics\":{\"sizeProfilePct\":9.16,\"adjSizeProfilePct\":9.16,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null}]},{\"clusterID\":3,\"sizes\":[{\"ahsSizeId\":3165,\"sizeId\":null,\"sizeDesc\":\"L\",\"metrics\":{\"sizeProfilePct\":27.69,\"adjSizeProfilePct\":27.69,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3222,\"sizeId\":null,\"sizeDesc\":\"M\",\"metrics\":{\"sizeProfilePct\":24.22,\"adjSizeProfilePct\":24.22,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3241,\"sizeId\":null,\"sizeDesc\":\"S\",\"metrics\":{\"sizeProfilePct\":12.61,\"adjSizeProfilePct\":12.61,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3279,\"sizeId\":null,\"sizeDesc\":\"XL\",\"metrics\":{\"sizeProfilePct\":18.6,\"adjSizeProfilePct\":18.6,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3317,\"sizeId\":null,\"sizeDesc\":\"XS\",\"metrics\":{\"sizeProfilePct\":4.25,\"adjSizeProfilePct\":4.25,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3336,\"sizeId\":null,\"sizeDesc\":\"XXL\",\"metrics\":{\"sizeProfilePct\":10.53,\"adjSizeProfilePct\":10.53,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null}]},{\"clusterID\":4,\"sizes\":[{\"ahsSizeId\":3165,\"sizeId\":null,\"sizeDesc\":\"L\",\"metrics\":{\"sizeProfilePct\":25.26,\"adjSizeProfilePct\":25.26,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3222,\"sizeId\":null,\"sizeDesc\":\"M\",\"metrics\":{\"sizeProfilePct\":21.75,\"adjSizeProfilePct\":21.75,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3241,\"sizeId\":null,\"sizeDesc\":\"S\",\"metrics\":{\"sizeProfilePct\":13.59,\"adjSizeProfilePct\":13.59,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3279,\"sizeId\":null,\"sizeDesc\":\"XL\",\"metrics\":{\"sizeProfilePct\":18.99,\"adjSizeProfilePct\":18.99,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3317,\"sizeId\":null,\"sizeDesc\":\"XS\",\"metrics\":{\"sizeProfilePct\":4.9,\"adjSizeProfilePct\":4.9,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3336,\"sizeId\":null,\"sizeDesc\":\"XXL\",\"metrics\":{\"sizeProfilePct\":12.29,\"adjSizeProfilePct\":12.29,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null}]},{\"clusterID\":5,\"sizes\":[{\"ahsSizeId\":3165,\"sizeId\":null,\"sizeDesc\":\"L\",\"metrics\":{\"sizeProfilePct\":25.38,\"adjSizeProfilePct\":25.38,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3222,\"sizeId\":null,\"sizeDesc\":\"M\",\"metrics\":{\"sizeProfilePct\":27.86,\"adjSizeProfilePct\":27.86,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3241,\"sizeId\":null,\"sizeDesc\":\"S\",\"metrics\":{\"sizeProfilePct\":15.99,\"adjSizeProfilePct\":15.99,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3279,\"sizeId\":null,\"sizeDesc\":\"XL\",\"metrics\":{\"sizeProfilePct\":15.4,\"adjSizeProfilePct\":15.4,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3317,\"sizeId\":null,\"sizeDesc\":\"XS\",\"metrics\":{\"sizeProfilePct\":5.61,\"adjSizeProfilePct\":5.61,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3336,\"sizeId\":null,\"sizeDesc\":\"XXL\",\"metrics\":{\"sizeProfilePct\":8.06,\"adjSizeProfilePct\":8.06,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null}]}],\"merchMethods\":null,\"channelId\":null}";
        try {
            return objectMapper.readValue(json, CustomerChoiceDto.class);
        } catch (JsonProcessingException e) {
            e.printStackTrace();
            Assertions.fail("Something happened deserializing store object");
        }
        return null;
    }

    private BuyQtyObj deserializeBuyQtyObj(String json) {
        try {
            return objectMapper.readValue(json, BuyQtyObj.class);
        } catch (JsonProcessingException e) {
            e.printStackTrace();
            Assertions.fail("Something happened deserializing store object");
        }
        return null;
    }

    BQFPResponse bqfpResponseFromFile(String path) throws IOException {
        return objectMapper.readValue(readJsonFileAsString(path), BQFPResponse.class);
    }

    BQFPResponse bqfpResponseFromJson(String json) throws IOException {
        return objectMapper.readValue((json), BQFPResponse.class);
    }

    private String readJsonFileAsString(String fileName) throws IOException {
        return new String(Files.readAllBytes(Paths.get("src/test/resources/data/" + fileName + ".json")));
    }

    private SizeDto getSizeDTO(){
        String sizeJson = "{\"ahsSizeId\":3165,\"sizeId\":null,\"sizeDesc\":\"L\",\"metrics\":{\"sizeProfilePct\":26.59,\"adjSizeProfilePct\":26.59,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null}";
        try {
            return objectMapper.readValue(sizeJson, SizeDto.class);
        } catch (JsonProcessingException e) {
            e.printStackTrace();
            Assertions.fail("Something happened deserializing store object");
        }
        return null;
    }

    private MerchMethodsDto getMerchMethodsDto(){
        MerchMethodsDto merchMethodsDto = new MerchMethodsDto();
        merchMethodsDto.setMerchMethod("RACKS");
        merchMethodsDto.setFixtureTypeRollupId(3);
        merchMethodsDto.setMerchMethodCode(3);
        return merchMethodsDto;
    }

    private StyleDto getStyleDTO(){
        String styleJson = "{\"styleNbr\":\"34_4440_3_24_001\",\"metrics\":{\"sizeProfilePct\":null,\"adjSizeProfilePct\":null,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"clusters\":null,\"customerChoices\":[{\"ccId\":\"34_4440_3_24_001_001\",\"colorName\":null,\"metrics\":{\"sizeProfilePct\":null,\"adjSizeProfilePct\":null,\"avgSizeProfilePct\":97.758,\"adjAvgSizeProfilePct\":97.758,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"clusters\":[{\"clusterID\":0,\"sizes\":[{\"ahsSizeId\":3165,\"sizeId\":null,\"sizeDesc\":\"L\",\"metrics\":{\"sizeProfilePct\":0,\"adjSizeProfilePct\":0,\"avgSizeProfilePct\":26.236,\"adjAvgSizeProfilePct\":26.236,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3222,\"sizeId\":null,\"sizeDesc\":\"M\",\"metrics\":{\"sizeProfilePct\":0,\"adjSizeProfilePct\":0,\"avgSizeProfilePct\":24.892,\"adjAvgSizeProfilePct\":24.892,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3241,\"sizeId\":null,\"sizeDesc\":\"S\",\"metrics\":{\"sizeProfilePct\":0,\"adjSizeProfilePct\":0,\"avgSizeProfilePct\":14.244,\"adjAvgSizeProfilePct\":14.244,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3279,\"sizeId\":null,\"sizeDesc\":\"XL\",\"metrics\":{\"sizeProfilePct\":0,\"adjSizeProfilePct\":0,\"avgSizeProfilePct\":17.416,\"adjAvgSizeProfilePct\":17.416,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3317,\"sizeId\":null,\"sizeDesc\":\"XS\",\"metrics\":{\"sizeProfilePct\":0,\"adjSizeProfilePct\":0,\"avgSizeProfilePct\":5.088,\"adjAvgSizeProfilePct\":5.088,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3336,\"sizeId\":null,\"sizeDesc\":\"XXL\",\"metrics\":{\"sizeProfilePct\":0,\"adjSizeProfilePct\":0,\"avgSizeProfilePct\":9.882,\"adjAvgSizeProfilePct\":9.882,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null}]},{\"clusterID\":1,\"sizes\":[{\"ahsSizeId\":3165,\"sizeId\":null,\"sizeDesc\":\"L\",\"metrics\":{\"sizeProfilePct\":26.59,\"adjSizeProfilePct\":26.59,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3222,\"sizeId\":null,\"sizeDesc\":\"M\",\"metrics\":{\"sizeProfilePct\":25.81,\"adjSizeProfilePct\":25.81,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3241,\"sizeId\":null,\"sizeDesc\":\"S\",\"metrics\":{\"sizeProfilePct\":14.22,\"adjSizeProfilePct\":14.22,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3279,\"sizeId\":null,\"sizeDesc\":\"XL\",\"metrics\":{\"sizeProfilePct\":17.22,\"adjSizeProfilePct\":17.22,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3317,\"sizeId\":null,\"sizeDesc\":\"XS\",\"metrics\":{\"sizeProfilePct\":4.87,\"adjSizeProfilePct\":4.87,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3336,\"sizeId\":null,\"sizeDesc\":\"XXL\",\"metrics\":{\"sizeProfilePct\":9.37,\"adjSizeProfilePct\":9.37,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null}]},{\"clusterID\":2,\"sizes\":[{\"ahsSizeId\":3165,\"sizeId\":null,\"sizeDesc\":\"L\",\"metrics\":{\"sizeProfilePct\":26.26,\"adjSizeProfilePct\":26.26,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3222,\"sizeId\":null,\"sizeDesc\":\"M\",\"metrics\":{\"sizeProfilePct\":24.82,\"adjSizeProfilePct\":24.82,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3241,\"sizeId\":null,\"sizeDesc\":\"S\",\"metrics\":{\"sizeProfilePct\":14.81,\"adjSizeProfilePct\":14.81,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3279,\"sizeId\":null,\"sizeDesc\":\"XL\",\"metrics\":{\"sizeProfilePct\":16.87,\"adjSizeProfilePct\":16.87,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3317,\"sizeId\":null,\"sizeDesc\":\"XS\",\"metrics\":{\"sizeProfilePct\":5.81,\"adjSizeProfilePct\":5.81,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3336,\"sizeId\":null,\"sizeDesc\":\"XXL\",\"metrics\":{\"sizeProfilePct\":9.16,\"adjSizeProfilePct\":9.16,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null}]},{\"clusterID\":3,\"sizes\":[{\"ahsSizeId\":3165,\"sizeId\":null,\"sizeDesc\":\"L\",\"metrics\":{\"sizeProfilePct\":27.69,\"adjSizeProfilePct\":27.69,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3222,\"sizeId\":null,\"sizeDesc\":\"M\",\"metrics\":{\"sizeProfilePct\":24.22,\"adjSizeProfilePct\":24.22,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3241,\"sizeId\":null,\"sizeDesc\":\"S\",\"metrics\":{\"sizeProfilePct\":12.61,\"adjSizeProfilePct\":12.61,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3279,\"sizeId\":null,\"sizeDesc\":\"XL\",\"metrics\":{\"sizeProfilePct\":18.6,\"adjSizeProfilePct\":18.6,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3317,\"sizeId\":null,\"sizeDesc\":\"XS\",\"metrics\":{\"sizeProfilePct\":4.25,\"adjSizeProfilePct\":4.25,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3336,\"sizeId\":null,\"sizeDesc\":\"XXL\",\"metrics\":{\"sizeProfilePct\":10.53,\"adjSizeProfilePct\":10.53,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null}]},{\"clusterID\":4,\"sizes\":[{\"ahsSizeId\":3165,\"sizeId\":null,\"sizeDesc\":\"L\",\"metrics\":{\"sizeProfilePct\":25.26,\"adjSizeProfilePct\":25.26,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3222,\"sizeId\":null,\"sizeDesc\":\"M\",\"metrics\":{\"sizeProfilePct\":21.75,\"adjSizeProfilePct\":21.75,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3241,\"sizeId\":null,\"sizeDesc\":\"S\",\"metrics\":{\"sizeProfilePct\":13.59,\"adjSizeProfilePct\":13.59,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3279,\"sizeId\":null,\"sizeDesc\":\"XL\",\"metrics\":{\"sizeProfilePct\":18.99,\"adjSizeProfilePct\":18.99,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3317,\"sizeId\":null,\"sizeDesc\":\"XS\",\"metrics\":{\"sizeProfilePct\":4.9,\"adjSizeProfilePct\":4.9,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3336,\"sizeId\":null,\"sizeDesc\":\"XXL\",\"metrics\":{\"sizeProfilePct\":12.29,\"adjSizeProfilePct\":12.29,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null}]},{\"clusterID\":5,\"sizes\":[{\"ahsSizeId\":3165,\"sizeId\":null,\"sizeDesc\":\"L\",\"metrics\":{\"sizeProfilePct\":25.38,\"adjSizeProfilePct\":25.38,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3222,\"sizeId\":null,\"sizeDesc\":\"M\",\"metrics\":{\"sizeProfilePct\":27.86,\"adjSizeProfilePct\":27.86,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3241,\"sizeId\":null,\"sizeDesc\":\"S\",\"metrics\":{\"sizeProfilePct\":15.99,\"adjSizeProfilePct\":15.99,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3279,\"sizeId\":null,\"sizeDesc\":\"XL\",\"metrics\":{\"sizeProfilePct\":15.4,\"adjSizeProfilePct\":15.4,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3317,\"sizeId\":null,\"sizeDesc\":\"XS\",\"metrics\":{\"sizeProfilePct\":5.61,\"adjSizeProfilePct\":5.61,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null},{\"ahsSizeId\":3336,\"sizeId\":null,\"sizeDesc\":\"XXL\",\"metrics\":{\"sizeProfilePct\":8.06,\"adjSizeProfilePct\":8.06,\"avgSizeProfilePct\":null,\"adjAvgSizeProfilePct\":null,\"buyQty\":null,\"bumpPackQty\":null,\"finalBuyQty\":null,\"finalInitialSetQty\":null,\"finalReplenishmentQty\":null,\"vendorPack\":null,\"warehousePack\":null,\"packRatio\":null,\"replenishmentPacks\":null},\"replenishments\":null}]}],\"merchMethods\":null,\"channelId\":null}],\"channelId\":null}";
        try {
            return objectMapper.readValue(styleJson, StyleDto.class);
        } catch (JsonProcessingException e) {
            e.printStackTrace();
            Assertions.fail("Something happened deserializing store object");
        }
        return null;
    }

    private List<RFASizePackData> getRFASizePackDataList(){
        List<RFASizePackData> rfaSizePackDataList = new ArrayList<>();
        String rfaSizeDataJson1 = "{\"rpt_lvl_0_nbr\":50000,\"rpt_lvl_1_nbr\":34,\"rpt_lvl_2_nbr\":1488,\"rpt_lvl_3_nbr\":9074,\"rpt_lvl_4_nbr\":7207,\"fineline_nbr\":4440,\"style_nbr\":\"34_4440_3_24_001\",\"customer_choice\":\"34_4440_3_24_001_001\",\"fixture_type\":\"RACKS\",\"fixture_group\":1,\"color_family\":\"default\",\"size_cluster_id\":1,\"volume_group_cluster_id\":1,\"store_list\":\"[945, 3631, 662, 5199, 531, 6898, 2340, 5382, 2688, 816, 4358, 148, 2355, 5041, 504, 2436, 3017, 789, 5449, 2865, 3548, 3294, 5116, 5087, 1241, 2838, 3796, 5466, 5191, 23, 371, 1206, 444, 5316, 2855, 1716, 3284, 3894, 61, 896, 2726, 2595, 1943, 5260, 3278, 673, 6807, 1762, 2728, 2720, 513, 1204, 4644, 2641, 2366, 5612, 1177, 2897, 1242, 1, 184, 7326, 5200, 511, 2464, 5252, 3495, 3118, 2560, 1565, 70, 7301, 659, 2227, 3570, 1842, 5879, 1567, 5748, 805, 2250, 5313, 1815, 1184, 1584, 3487, 1361, 1840, 3285, 1303, 1376, 12, 543, 2598, 870, 464, 3404, 3891, 1532, 5082, 1524, 1626, 2215, 1118, 5278]\",\"store_cnt\":105,\"plan_id_partition\":72}";
        rfaSizePackDataList.add(getRFASizePackData(rfaSizeDataJson1));
        return rfaSizePackDataList;
    }

    private RFASizePackData getRFASizePackData(String json){
        try {
            return objectMapper.readValue(json, RFASizePackData.class);
        } catch (JsonProcessingException e) {
            e.printStackTrace();
            Assertions.fail("Something happened deserializing store object");
        }
        return null;
    }


}
